<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Run the tool &mdash; Providentia 2.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=7ae09063" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=c3c8ae58"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Modes" href="modes.html" />
    <link rel="prev" title="Clone the project" href="Clone-the-project.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Providentia
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="home.html">Home</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="setup.html">Tool setup</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Clone-the-project.html">Clone the project</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Run the tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tool-on-a-bsc-machine">Running the tool on a BSC machine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#launch-the-dashboard">Launch the dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate-a-report">Generate a report</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-providentia-as-a-library">Using Providentia as a library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interpolate-your-model-data-to-observations">Interpolate your model data to observations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tool-on-a-personal-machine">Running the tool on a personal machine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#redirecting-log-output-to-a-file">Redirecting log output to a file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modes.html">Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics-in-depth.html">Topics in depth</a></li>
<li class="toctree-l1"><a class="reference internal" href="other-topics.html">Other topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="evolution.html">Evolution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Providentia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="setup.html">Tool setup</a></li>
      <li class="breadcrumb-item active">Run the tool</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Run-the-tool.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="run-the-tool">
<h1>Run the tool<a class="headerlink" href="#run-the-tool" title="Link to this heading"></a></h1>
<section id="running-the-tool-on-a-bsc-machine">
<h2>Running the tool on a BSC machine<a class="headerlink" href="#running-the-tool-on-a-bsc-machine" title="Link to this heading"></a></h2>
<p>If you are on Nord4 or Marenostrum 5, this will request an interactive session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span>
</pre></div>
</div>
<p>After some seconds you will have entered onto an allocated node and the dashboard will be launched. If you want to launch it multiple times and avoid waiting in the queue you can use the debug mode. To do this, you will need to run the tool using the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> flag and then rerun it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span> <span class="o">--</span><span class="n">debug</span>
<span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span>
</pre></div>
</div>
<p>By default, a wall time of 2 hours is requested, with 12 CPUs and 30Gb of total memory. This can be modified as desired using the bash options. You can check the available options with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span> <span class="o">--</span><span class="n">usage</span>
</pre></div>
</div>
<section id="launch-the-dashboard">
<h3>Launch the dashboard<a class="headerlink" href="#launch-the-dashboard" title="Link to this heading"></a></h3>
<p>As explained, you can launch the dashboard by simply running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span>
</pre></div>
</div>
<p>If you already have a <a class="reference internal" href="Configuration-files.html"><span class="doc std std-doc">configuration file</span></a>, you can specify its path in the command line with the argument <code class="docutils literal notranslate"><span class="pre">--config</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span> <span class="o">--</span><span class="n">config</span><span class="o">=</span><span class="s1">&#39;/path/to/file/example.conf&#39;</span>
</pre></div>
</div>
<p>A pop-up window will immediately appear where you can choose the section or subsection of interest. After that, the graphical window of Providentia will appear and you can begin using the tool.</p>
</section>
<section id="generate-a-report">
<h3>Generate a report<a class="headerlink" href="#generate-a-report" title="Link to this heading"></a></h3>
<p>If you have your <a class="reference internal" href="Configuration-files.html"><span class="doc std std-doc">configuration file</span></a> ready, you can generate reports by running Providentia with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span> <span class="o">--</span><span class="n">config</span><span class="o">=</span><span class="s1">&#39;/path/to/file/example.conf&#39;</span> <span class="o">--</span><span class="n">offline</span>
</pre></div>
</div>
<p>The mandatory commands are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--config</span></code>: specify the path of your <a class="reference internal" href="Configuration-files.html"><span class="doc std std-doc">configuration file</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--offline</span></code>: for creating a report, without launching the dashboard</p></li>
</ul>
<p>You can also launch the dashboard or get a report for only one section by using the option  <code class="docutils literal notranslate"><span class="pre">--section</span></code>. In order to indicate subsections, you will need to write the section name, followed by a hyphen (-) and the subsection name.</p>
<p>The reports will be saved under the folder <code class="docutils literal notranslate"><span class="pre">reports</span></code>. You can add a path in the <code class="docutils literal notranslate"><span class="pre">report_filename</span></code> of the configuration file to change the default directory.</p>
</section>
<section id="using-providentia-as-a-library">
<h3>Using Providentia as a library<a class="headerlink" href="#using-providentia-as-a-library" title="Link to this heading"></a></h3>
<p>A Jupyter notebook can be launched with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span> <span class="o">--</span><span class="n">interactive</span>
</pre></div>
</div>
</section>
<section id="interpolate-your-model-data-to-observations">
<h3>Interpolate your model data to observations<a class="headerlink" href="#interpolate-your-model-data-to-observations" title="Link to this heading"></a></h3>
<p>Using a <a class="reference internal" href="Configuration-files.html"><span class="doc std std-doc">configuration file</span></a>, you can start interpolating your model data to your desired observational network.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">providentia</span> <span class="o">--</span><span class="n">config</span><span class="o">=</span><span class="s1">&#39;/path/to/file/example.conf&#39;</span> <span class="o">--</span><span class="n">interpolate</span>
</pre></div>
</div>
<p>More details can be found in the <a class="reference internal" href="Interpolation.html"><span class="doc std std-doc">interpolation section</span></a>.</p>
</section>
</section>
<section id="running-the-tool-on-a-personal-machine">
<h2>Running the tool on a personal machine<a class="headerlink" href="#running-the-tool-on-a-personal-machine" title="Link to this heading"></a></h2>
<p>If you do not have access to the BSC machines, you can define the directories where your data is stored. You can do this by editing the file <code class="docutils literal notranslate"><span class="pre">settings/data_paths.yaml</span></code> and defining <code class="docutils literal notranslate"><span class="pre">ghost_root</span></code>, <code class="docutils literal notranslate"><span class="pre">nonghost_root</span></code> and <code class="docutils literal notranslate"><span class="pre">exp_root</span></code> under <code class="docutils literal notranslate"><span class="pre">local</span></code>. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="s2">&quot;local&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ghost_root&quot;</span><span class="p">:</span> <span class="s2">&quot;/data/providentia/obs/ghost/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nonghost_root&quot;</span><span class="p">:</span> <span class="s2">&quot;/data/providentia/obs/nonghost/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exp_root&quot;</span><span class="p">:</span> <span class="s2">&quot;/data/providentia/exp/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exp_to_interp_root&quot;</span><span class="p">:</span> <span class="s2">&quot;/data/providentia/exp_to_interp&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>By default these paths are set as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="s2">&quot;local&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ghost_root&quot;</span><span class="p">:</span> <span class="s2">&quot;~/data/providentia/obs/ghost&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;nonghost_root&quot;</span><span class="p">:</span> <span class="s2">&quot;~/data/providentia/obs/nonghost&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;exp_root&quot;</span><span class="p">:</span> <span class="s2">&quot;~/data/providentia/exp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exp_to_interp_root&quot;</span><span class="p">:</span> <span class="s2">&quot;~/data/providentia/exp_to_interp&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">~</span></code> corresponds to <code class="docutils literal notranslate"><span class="pre">/home/{username}</span></code>.</p>
<p>You should download the data that you need from the BSC systems to the local machine. To do this, you can use the <a class="reference internal" href="Download.html"><span class="doc std std-doc">download mode</span></a>.</p>
<p>If it is the first time that you launch Providentia, an environment called <code class="docutils literal notranslate"><span class="pre">providentia-env</span></code> will be created with all the necessary dependencies. If for some reason you want to create the environment from scratch, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">environment</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>You might get a warning like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span> <span class="n">conda</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">version</span><span class="p">:</span><span class="n">get_matcher</span><span class="p">(</span><span class="mi">556</span><span class="p">):</span> <span class="n">Using</span> <span class="o">.*</span> <span class="k">with</span> <span class="n">relational</span> <span class="n">operator</span> <span class="ow">is</span> <span class="n">superfluous</span> <span class="ow">and</span> <span class="n">deprecated</span> <span class="ow">and</span> <span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">future</span> <span class="n">version</span> <span class="n">of</span> <span class="n">conda</span><span class="o">.</span> <span class="n">Your</span> <span class="n">spec</span> <span class="n">was</span> <span class="mf">1.6.0</span><span class="o">.*</span><span class="p">,</span> <span class="n">but</span> <span class="n">conda</span> <span class="ow">is</span> <span class="n">ignoring</span> <span class="n">the</span> <span class="o">.*</span> <span class="ow">and</span> <span class="n">treating</span> <span class="n">it</span> <span class="k">as</span> <span class="mf">1.6.0</span>
</pre></div>
</div>
<p>This can be removed by updating conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">update</span> <span class="n">conda</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">n</span> <span class="n">base</span> <span class="n">conda</span><span class="o">=</span><span class="mf">24.4.0</span> <span class="n">conda</span><span class="o">-</span><span class="n">build</span><span class="o">=</span><span class="mf">24.3.0</span>
</pre></div>
</div>
<p>Check what the latest versions of <a class="reference external" href="https://github.com/conda/conda/releases">conda</a> and <a class="reference external" href="https://github.com/conda/conda-build/releases">conda-build</a> are.</p>
</section>
</section>
<section id="redirecting-log-output-to-a-file">
<h1>Redirecting log output to a file<a class="headerlink" href="#redirecting-log-output-to-a-file" title="Link to this heading"></a></h1>
<p>Providentia allows saving its output to a log file using the <code class="docutils literal notranslate"><span class="pre">--logfile</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./bin/providentia<span class="w"> </span>--logfile<span class="w"> </span>&lt;filename&gt;
</pre></div>
</div>
<p>More details <a class="reference external" href="https://earth.bsc.es/gitlab/ac/Providentia/-/wikis/Redirecting-output-to-a-file">here</a>.</p>
<p>Enjoy!</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Clone-the-project.html" class="btn btn-neutral float-left" title="Clone the project" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modes.html" class="btn btn-neutral float-right" title="Modes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2024, Dene Bowdalo, Amalia Vradi, Alba Vilanova Cortezón, Paula Serrano Sierra, Francesco Benincasa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>